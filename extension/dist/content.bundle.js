(()=>{var ca,f,Ja,Ea,H,Ka,Xa,Za,Qa,Ca,xa,wa,at,aa={},tt=[],Ut=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,da=Array.isArray;function z(t,a){for(var e in a)t[e]=a[e];return t}function Ta(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function $t(t,a,e){var i,n,r,p={};for(r in a)r=="key"?i=a[r]:r=="ref"?n=a[r]:p[r]=a[r];if(arguments.length>2&&(p.children=arguments.length>3?ca.call(arguments,2):e),typeof t=="function"&&t.defaultProps!=null)for(r in t.defaultProps)p[r]===void 0&&(p[r]=t.defaultProps[r]);return la(t,p,i,n,null)}function la(t,a,e,i,n){var r={type:t,props:a,key:e,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:n??++Ja,__i:-1,__u:0};return n==null&&f.vnode!=null&&f.vnode(r),r}function P(t){return t.children}function F(t,a){this.props=t,this.context=a}function W(t,a){if(a==null)return t.__?W(t.__,t.__i+1):null;for(var e;a<t.__k.length;a++)if((e=t.__k[a])!=null&&e.__e!=null)return e.__e;return typeof t.type=="function"?W(t):null}function et(t){var a,e;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,a=0;a<t.__k.length;a++)if((e=t.__k[a])!=null&&e.__e!=null){t.__e=t.__c.base=e.__e;break}return et(t)}}function ka(t){(!t.__d&&(t.__d=!0)&&H.push(t)&&!ha.__r++||Ka!=f.debounceRendering)&&((Ka=f.debounceRendering)||Xa)(ha)}function ha(){for(var t,a,e,i,n,r,p,l=1;H.length;)H.length>l&&H.sort(Za),t=H.shift(),l=H.length,t.__d&&(e=void 0,i=void 0,n=(i=(a=t).__v).__e,r=[],p=[],a.__P&&((e=z({},i)).__v=i.__v+1,f.vnode&&f.vnode(e),Ia(a.__P,e,i,a.__n,a.__P.namespaceURI,32&i.__u?[n]:null,r,n??W(i),!!(32&i.__u),p),e.__v=i.__v,e.__.__k[e.__i]=e,nt(r,e,p),i.__e=i.__=null,e.__e!=n&&et(e)));ha.__r=0}function it(t,a,e,i,n,r,p,l,d,s,c){var o,u,y,k,C,S,m,g=i&&i.__k||tt,L=a.length;for(d=Gt(e,a,g,d,L),o=0;o<L;o++)(y=e.__k[o])!=null&&(u=y.__i==-1?aa:g[y.__i]||aa,y.__i=o,S=Ia(t,y,u,n,r,p,l,d,s,c),k=y.__e,y.ref&&u.ref!=y.ref&&(u.ref&&Aa(u.ref,null,y),c.push(y.ref,y.__c||k,y)),C==null&&k!=null&&(C=k),(m=!!(4&y.__u))||u.__k===y.__k?d=rt(y,d,t,m):typeof y.type=="function"&&S!==void 0?d=S:k&&(d=k.nextSibling),y.__u&=-7);return e.__e=C,d}function Gt(t,a,e,i,n){var r,p,l,d,s,c=e.length,o=c,u=0;for(t.__k=new Array(n),r=0;r<n;r++)(p=a[r])!=null&&typeof p!="boolean"&&typeof p!="function"?(typeof p=="string"||typeof p=="number"||typeof p=="bigint"||p.constructor==String?p=t.__k[r]=la(null,p,null,null,null):da(p)?p=t.__k[r]=la(P,{children:p},null,null,null):p.constructor===void 0&&p.__b>0?p=t.__k[r]=la(p.type,p.props,p.key,p.ref?p.ref:null,p.__v):t.__k[r]=p,d=r+u,p.__=t,p.__b=t.__b+1,l=null,(s=p.__i=Ft(p,e,d,o))!=-1&&(o--,(l=e[s])&&(l.__u|=2)),l==null||l.__v==null?(s==-1&&(n>c?u--:n<c&&u++),typeof p.type!="function"&&(p.__u|=4)):s!=d&&(s==d-1?u--:s==d+1?u++:(s>d?u--:u++,p.__u|=4))):t.__k[r]=null;if(o)for(r=0;r<c;r++)(l=e[r])!=null&&!(2&l.__u)&&(l.__e==i&&(i=W(l)),pt(l,l));return i}function rt(t,a,e,i){var n,r;if(typeof t.type=="function"){for(n=t.__k,r=0;n&&r<n.length;r++)n[r]&&(n[r].__=t,a=rt(n[r],a,e,i));return a}t.__e!=a&&(i&&(a&&t.type&&!a.parentNode&&(a=W(t)),e.insertBefore(t.__e,a||null)),a=t.__e);do a=a&&a.nextSibling;while(a!=null&&a.nodeType==8);return a}function Ft(t,a,e,i){var n,r,p,l=t.key,d=t.type,s=a[e],c=s!=null&&(2&s.__u)==0;if(s===null&&l==null||c&&l==s.key&&d==s.type)return e;if(i>(c?1:0)){for(n=e-1,r=e+1;n>=0||r<a.length;)if((s=a[p=n>=0?n--:r++])!=null&&!(2&s.__u)&&l==s.key&&d==s.type)return p}return-1}function Ya(t,a,e){a[0]=="-"?t.setProperty(a,e??""):t[a]=e==null?"":typeof e!="number"||Ut.test(a)?e:e+"px"}function sa(t,a,e,i,n){var r,p;a:if(a=="style")if(typeof e=="string")t.style.cssText=e;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(a in i)e&&a in e||Ya(t.style,a,"");if(e)for(a in e)i&&e[a]==i[a]||Ya(t.style,a,e[a])}else if(a[0]=="o"&&a[1]=="n")r=a!=(a=a.replace(Qa,"$1")),p=a.toLowerCase(),a=p in t||a=="onFocusOut"||a=="onFocusIn"?p.slice(2):a.slice(2),t.l||(t.l={}),t.l[a+r]=e,e?i?e.u=i.u:(e.u=Ca,t.addEventListener(a,r?wa:xa,r)):t.removeEventListener(a,r?wa:xa,r);else{if(n=="http://www.w3.org/2000/svg")a=a.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(a!="width"&&a!="height"&&a!="href"&&a!="list"&&a!="form"&&a!="tabIndex"&&a!="download"&&a!="rowSpan"&&a!="colSpan"&&a!="role"&&a!="popover"&&a in t)try{t[a]=e??"";break a}catch{}typeof e=="function"||(e==null||e===!1&&a[4]!="-"?t.removeAttribute(a):t.setAttribute(a,a=="popover"&&e==1?"":e))}}function Va(t){return function(a){if(this.l){var e=this.l[a.type+t];if(a.t==null)a.t=Ca++;else if(a.t<e.u)return;return e(f.event?f.event(a):a)}}}function Ia(t,a,e,i,n,r,p,l,d,s){var c,o,u,y,k,C,S,m,g,L,M,oa,Z,qa,pa,Q,ba,I=a.type;if(a.constructor!==void 0)return null;128&e.__u&&(d=!!(32&e.__u),r=[l=a.__e=e.__e]),(c=f.__b)&&c(a);a:if(typeof I=="function")try{if(m=a.props,g="prototype"in I&&I.prototype.render,L=(c=I.contextType)&&i[c.__c],M=c?L?L.props.value:c.__:i,e.__c?S=(o=a.__c=e.__c).__=o.__E:(g?a.__c=o=new I(m,M):(a.__c=o=new F(m,M),o.constructor=I,o.render=qt),L&&L.sub(o),o.state||(o.state={}),o.__n=i,u=o.__d=!0,o.__h=[],o._sb=[]),g&&o.__s==null&&(o.__s=o.state),g&&I.getDerivedStateFromProps!=null&&(o.__s==o.state&&(o.__s=z({},o.__s)),z(o.__s,I.getDerivedStateFromProps(m,o.__s))),y=o.props,k=o.state,o.__v=a,u)g&&I.getDerivedStateFromProps==null&&o.componentWillMount!=null&&o.componentWillMount(),g&&o.componentDidMount!=null&&o.__h.push(o.componentDidMount);else{if(g&&I.getDerivedStateFromProps==null&&m!==y&&o.componentWillReceiveProps!=null&&o.componentWillReceiveProps(m,M),a.__v==e.__v||!o.__e&&o.shouldComponentUpdate!=null&&o.shouldComponentUpdate(m,o.__s,M)===!1){for(a.__v!=e.__v&&(o.props=m,o.state=o.__s,o.__d=!1),a.__e=e.__e,a.__k=e.__k,a.__k.some(function(G){G&&(G.__=a)}),oa=0;oa<o._sb.length;oa++)o.__h.push(o._sb[oa]);o._sb=[],o.__h.length&&p.push(o);break a}o.componentWillUpdate!=null&&o.componentWillUpdate(m,o.__s,M),g&&o.componentDidUpdate!=null&&o.__h.push(function(){o.componentDidUpdate(y,k,C)})}if(o.context=M,o.props=m,o.__P=t,o.__e=!1,Z=f.__r,qa=0,g){for(o.state=o.__s,o.__d=!1,Z&&Z(a),c=o.render(o.props,o.state,o.context),pa=0;pa<o._sb.length;pa++)o.__h.push(o._sb[pa]);o._sb=[]}else do o.__d=!1,Z&&Z(a),c=o.render(o.props,o.state,o.context),o.state=o.__s;while(o.__d&&++qa<25);o.state=o.__s,o.getChildContext!=null&&(i=z(z({},i),o.getChildContext())),g&&!u&&o.getSnapshotBeforeUpdate!=null&&(C=o.getSnapshotBeforeUpdate(y,k)),Q=c,c!=null&&c.type===P&&c.key==null&&(Q=ot(c.props.children)),l=it(t,da(Q)?Q:[Q],a,e,i,n,r,p,l,d,s),o.base=a.__e,a.__u&=-161,o.__h.length&&p.push(o),S&&(o.__E=o.__=null)}catch(G){if(a.__v=null,d||r!=null)if(G.then){for(a.__u|=d?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;r[r.indexOf(l)]=null,a.__e=l}else{for(ba=r.length;ba--;)Ta(r[ba]);Sa(a)}else a.__e=e.__e,a.__k=e.__k,G.then||Sa(a);f.__e(G,a,e)}else r==null&&a.__v==e.__v?(a.__k=e.__k,a.__e=e.__e):l=a.__e=Wt(e.__e,a,e,i,n,r,p,d,s);return(c=f.diffed)&&c(a),128&a.__u?void 0:l}function Sa(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(Sa)}function nt(t,a,e){for(var i=0;i<e.length;i++)Aa(e[i],e[++i],e[++i]);f.__c&&f.__c(a,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(r){r.call(n)})}catch(r){f.__e(r,n.__v)}})}function ot(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:da(t)?t.map(ot):z({},t)}function Wt(t,a,e,i,n,r,p,l,d){var s,c,o,u,y,k,C,S=e.props||aa,m=a.props,g=a.type;if(g=="svg"?n="http://www.w3.org/2000/svg":g=="math"?n="http://www.w3.org/1998/Math/MathML":n||(n="http://www.w3.org/1999/xhtml"),r!=null){for(s=0;s<r.length;s++)if((y=r[s])&&"setAttribute"in y==!!g&&(g?y.localName==g:y.nodeType==3)){t=y,r[s]=null;break}}if(t==null){if(g==null)return document.createTextNode(m);t=document.createElementNS(n,g,m.is&&m),l&&(f.__m&&f.__m(a,r),l=!1),r=null}if(g==null)S===m||l&&t.data==m||(t.data=m);else{if(r=r&&ca.call(t.childNodes),!l&&r!=null)for(S={},s=0;s<t.attributes.length;s++)S[(y=t.attributes[s]).name]=y.value;for(s in S)if(y=S[s],s!="children"){if(s=="dangerouslySetInnerHTML")o=y;else if(!(s in m)){if(s=="value"&&"defaultValue"in m||s=="checked"&&"defaultChecked"in m)continue;sa(t,s,null,y,n)}}for(s in m)y=m[s],s=="children"?u=y:s=="dangerouslySetInnerHTML"?c=y:s=="value"?k=y:s=="checked"?C=y:l&&typeof y!="function"||S[s]===y||sa(t,s,y,S[s],n);if(c)l||o&&(c.__html==o.__html||c.__html==t.innerHTML)||(t.innerHTML=c.__html),a.__k=[];else if(o&&(t.innerHTML=""),it(a.type=="template"?t.content:t,da(u)?u:[u],a,e,i,g=="foreignObject"?"http://www.w3.org/1999/xhtml":n,r,p,r?r[0]:e.__k&&W(e,0),l,d),r!=null)for(s=r.length;s--;)Ta(r[s]);l||(s="value",g=="progress"&&k==null?t.removeAttribute("value"):k!=null&&(k!==t[s]||g=="progress"&&!k||g=="option"&&k!=S[s])&&sa(t,s,k,S[s],n),s="checked",C!=null&&C!=t[s]&&sa(t,s,C,S[s],n))}return t}function Aa(t,a,e){try{if(typeof t=="function"){var i=typeof t.__u=="function";i&&t.__u(),i&&a==null||(t.__u=t(a))}else t.current=a}catch(n){f.__e(n,e)}}function pt(t,a,e){var i,n;if(f.unmount&&f.unmount(t),(i=t.ref)&&(i.current&&i.current!=t.__e||Aa(i,null,a)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(r){f.__e(r,a)}i.base=i.__P=null}if(i=t.__k)for(n=0;n<i.length;n++)i[n]&&pt(i[n],a,e||typeof t.type!="function");e||Ta(t.__e),t.__c=t.__=t.__e=void 0}function qt(t,a,e){return this.constructor(t,e)}function st(t,a,e){var i,n,r,p;a==document&&(a=document.documentElement),f.__&&f.__(t,a),n=(i=typeof e=="function")?null:e&&e.__k||a.__k,r=[],p=[],Ia(a,t=(!i&&e||a).__k=$t(P,null,[t]),n||aa,aa,a.namespaceURI,!i&&e?[e]:n?null:a.firstChild?ca.call(a.childNodes):null,r,!i&&e?e:n?n.__e:a.firstChild,i,p),nt(r,t,p)}function lt(t){function a(e){var i,n;return this.getChildContext||(i=new Set,(n={})[a.__c]=this,this.getChildContext=function(){return n},this.componentWillUnmount=function(){i=null},this.shouldComponentUpdate=function(r){this.props.value!=r.value&&i.forEach(function(p){p.__e=!0,ka(p)})},this.sub=function(r){i.add(r);var p=r.componentWillUnmount;r.componentWillUnmount=function(){i&&i.delete(r),p&&p.call(r)}}),e.children}return a.__c="__cC"+at++,a.__=t,a.Provider=a.__l=(a.Consumer=function(e,i){return e.children(i)}).contextType=a,a}ca=tt.slice,f={__e:function(t,a,e,i){for(var n,r,p;a=a.__;)if((n=a.__c)&&!n.__)try{if((r=n.constructor)&&r.getDerivedStateFromError!=null&&(n.setState(r.getDerivedStateFromError(t)),p=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(t,i||{}),p=n.__d),p)return n.__E=n}catch(l){t=l}throw t}},Ja=0,Ea=function(t){return t!=null&&t.constructor===void 0},F.prototype.setState=function(t,a){var e;e=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=z({},this.state),typeof t=="function"&&(t=t(z({},e),this.props)),t&&z(e,t),t!=null&&this.__v&&(a&&this._sb.push(a),ka(this))},F.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ka(this))},F.prototype.render=P,H=[],Xa=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Za=function(t,a){return t.__v.__b-a.__v.__b},ha.__r=0,Qa=/(PointerCapture)$|Capture$/i,Ca=0,xa=Va(!1),wa=Va(!0),at=0;var ta,b,za,ht,ea=0,gt=[],x=f,ct=x.__b,dt=x.__r,yt=x.diffed,ut=x.__c,ft=x.unmount,vt=x.__;function Ra(t,a){x.__h&&x.__h(b,t,ea||a),ea=0;var e=b.__H||(b.__H={__:[],__h:[]});return t>=e.__.length&&e.__.push({}),e.__[t]}function ua(t){return ea=1,Kt(xt,t)}function Kt(t,a,e){var i=Ra(ta++,2);if(i.t=t,!i.__c&&(i.__=[e?e(a):xt(void 0,a),function(l){var d=i.__N?i.__N[0]:i.__[0],s=i.t(d,l);d!==s&&(i.__N=[s,i.__[1]],i.__c.setState({}))}],i.__c=b,!b.__f)){var n=function(l,d,s){if(!i.__c.__H)return!0;var c=i.__c.__H.__.filter(function(u){return!!u.__c});if(c.every(function(u){return!u.__N}))return!r||r.call(this,l,d,s);var o=i.__c.props!==l;return c.forEach(function(u){if(u.__N){var y=u.__[0];u.__=u.__N,u.__N=void 0,y!==u.__[0]&&(o=!0)}}),r&&r.call(this,l,d,s)||o};b.__f=!0;var r=b.shouldComponentUpdate,p=b.componentWillUpdate;b.componentWillUpdate=function(l,d,s){if(this.__e){var c=r;r=void 0,n(l,d,s),r=c}p&&p.call(this,l,d,s)},b.shouldComponentUpdate=n}return i.__N||i.__}function N(t,a){var e=Ra(ta++,3);!x.__s&&bt(e.__H,a)&&(e.__=t,e.u=a,b.__H.__h.push(e))}function D(t){return ea=5,ia(function(){return{current:t}},[])}function ia(t,a){var e=Ra(ta++,7);return bt(e.__H,a)&&(e.__=t(),e.__H=a,e.__h=t),e.__}function mt(t,a){return ea=8,ia(function(){return t},a)}function Yt(){for(var t;t=gt.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(ya),t.__H.__h.forEach(Na),t.__H.__h=[]}catch(a){t.__H.__h=[],x.__e(a,t.__v)}}x.__b=function(t){b=null,ct&&ct(t)},x.__=function(t,a){t&&a.__k&&a.__k.__m&&(t.__m=a.__k.__m),vt&&vt(t,a)},x.__r=function(t){dt&&dt(t),ta=0;var a=(b=t.__c).__H;a&&(za===b?(a.__h=[],b.__h=[],a.__.forEach(function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0})):(a.__h.forEach(ya),a.__h.forEach(Na),a.__h=[],ta=0)),za=b},x.diffed=function(t){yt&&yt(t);var a=t.__c;a&&a.__H&&(a.__H.__h.length&&(gt.push(a)!==1&&ht===x.requestAnimationFrame||((ht=x.requestAnimationFrame)||Vt)(Yt)),a.__H.__.forEach(function(e){e.u&&(e.__H=e.u),e.u=void 0})),za=b=null},x.__c=function(t,a){a.some(function(e){try{e.__h.forEach(ya),e.__h=e.__h.filter(function(i){return!i.__||Na(i)})}catch(i){a.some(function(n){n.__h&&(n.__h=[])}),a=[],x.__e(i,e.__v)}}),ut&&ut(t,a)},x.unmount=function(t){ft&&ft(t);var a,e=t.__c;e&&e.__H&&(e.__H.__.forEach(function(i){try{ya(i)}catch(n){a=n}}),e.__H=void 0,a&&x.__e(a,e.__v))};var _t=typeof requestAnimationFrame=="function";function Vt(t){var a,e=function(){clearTimeout(i),_t&&cancelAnimationFrame(a),setTimeout(t)},i=setTimeout(e,35);_t&&(a=requestAnimationFrame(e))}function ya(t){var a=b,e=t.__c;typeof e=="function"&&(t.__c=void 0,e()),b=a}function Na(t){var a=b;t.__c=t.__(),b=a}function bt(t,a){return!t||t.length!==a.length||a.some(function(e,i){return e!==t[i]})}function xt(t,a){return typeof a=="function"?a(t):a}var Jt=Symbol.for("preact-signals");function Pa(){if(q>1)q--;else{for(var t,a=!1;ra!==void 0;){var e=ra;for(ra=void 0,La++;e!==void 0;){var i=e.o;if(e.o=void 0,e.f&=-3,!(8&e.f)&&kt(e))try{e.c()}catch(n){a||(t=n,a=!0)}e=i}}if(La=0,q--,a)throw t}}var v=void 0;function Ma(t){var a=v;v=void 0;try{return t()}finally{v=a}}var ra=void 0,q=0,La=0,fa=0;function wt(t){if(v!==void 0){var a=t.n;if(a===void 0||a.t!==v)return a={i:0,S:t,p:v.s,n:void 0,t:v,e:void 0,x:void 0,r:a},v.s!==void 0&&(v.s.n=a),v.s=a,t.n=a,32&v.f&&t.S(a),a;if(a.i===-1)return a.i=0,a.n!==void 0&&(a.n.p=a.p,a.p!==void 0&&(a.p.n=a.n),a.p=v.s,a.n=void 0,v.s.n=a,v.s=a),a}}function w(t,a){this.v=t,this.i=0,this.n=void 0,this.t=void 0,this.W=a?.watched,this.Z=a?.unwatched,this.name=a?.name}w.prototype.brand=Jt;w.prototype.h=function(){return!0};w.prototype.S=function(t){var a=this,e=this.t;e!==t&&t.e===void 0&&(t.x=e,this.t=t,e!==void 0?e.e=t:Ma(function(){var i;(i=a.W)==null||i.call(a)}))};w.prototype.U=function(t){var a=this;if(this.t!==void 0){var e=t.e,i=t.x;e!==void 0&&(e.x=i,t.e=void 0),i!==void 0&&(i.e=e,t.x=void 0),t===this.t&&(this.t=i,i===void 0&&Ma(function(){var n;(n=a.Z)==null||n.call(a)}))}};w.prototype.subscribe=function(t){var a=this;return B(function(){var e=a.value,i=v;v=void 0;try{t(e)}finally{v=i}},{name:"sub"})};w.prototype.valueOf=function(){return this.value};w.prototype.toString=function(){return this.value+""};w.prototype.toJSON=function(){return this.value};w.prototype.peek=function(){var t=v;v=void 0;try{return this.value}finally{v=t}};Object.defineProperty(w.prototype,"value",{get:function(){var t=wt(this);return t!==void 0&&(t.i=this.i),this.v},set:function(t){if(t!==this.v){if(La>100)throw new Error("Cycle detected");this.v=t,this.i++,fa++,q++;try{for(var a=this.t;a!==void 0;a=a.x)a.t.N()}finally{Pa()}}}});function _(t,a){return new w(t,a)}function kt(t){for(var a=t.s;a!==void 0;a=a.n)if(a.S.i!==a.i||!a.S.h()||a.S.i!==a.i)return!0;return!1}function St(t){for(var a=t.s;a!==void 0;a=a.n){var e=a.S.n;if(e!==void 0&&(a.r=e),a.S.n=a,a.i=-1,a.n===void 0){t.s=a;break}}}function Et(t){for(var a=t.s,e=void 0;a!==void 0;){var i=a.p;a.i===-1?(a.S.U(a),i!==void 0&&(i.n=a.n),a.n!==void 0&&(a.n.p=i)):e=a,a.S.n=a.r,a.r!==void 0&&(a.r=void 0),a=i}t.s=e}function O(t,a){w.call(this,void 0),this.x=t,this.s=void 0,this.g=fa-1,this.f=4,this.W=a?.watched,this.Z=a?.unwatched,this.name=a?.name}O.prototype=new w;O.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===fa))return!0;if(this.g=fa,this.f|=1,this.i>0&&!kt(this))return this.f&=-2,!0;var t=v;try{St(this),v=this;var a=this.x();(16&this.f||this.v!==a||this.i===0)&&(this.v=a,this.f&=-17,this.i++)}catch(e){this.v=e,this.f|=16,this.i++}return v=t,Et(this),this.f&=-2,!0};O.prototype.S=function(t){if(this.t===void 0){this.f|=36;for(var a=this.s;a!==void 0;a=a.n)a.S.S(a)}w.prototype.S.call(this,t)};O.prototype.U=function(t){if(this.t!==void 0&&(w.prototype.U.call(this,t),this.t===void 0)){this.f&=-33;for(var a=this.s;a!==void 0;a=a.n)a.S.U(a)}};O.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;t!==void 0;t=t.x)t.t.N()}};Object.defineProperty(O.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var t=wt(this);if(this.h(),t!==void 0&&(t.i=this.i),16&this.f)throw this.v;return this.v}});function j(t,a){return new O(t,a)}function Ct(t){var a=t.u;if(t.u=void 0,typeof a=="function"){q++;var e=v;v=void 0;try{a()}catch(i){throw t.f&=-2,t.f|=8,Ha(t),i}finally{v=e,Pa()}}}function Ha(t){for(var a=t.s;a!==void 0;a=a.n)a.S.U(a);t.x=void 0,t.s=void 0,Ct(t)}function Xt(t){if(v!==this)throw new Error("Out-of-order effect");Et(this),v=t,this.f&=-2,8&this.f&&Ha(this),Pa()}function K(t,a){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=a?.name}K.prototype.c=function(){var t=this.S();try{if(8&this.f||this.x===void 0)return;var a=this.x();typeof a=="function"&&(this.u=a)}finally{t()}};K.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,Ct(this),St(this),q++;var t=v;return v=this,Xt.bind(this,t)};K.prototype.N=function(){2&this.f||(this.f|=2,this.o=ra,ra=this)};K.prototype.d=function(){this.f|=8,1&this.f||Ha(this)};K.prototype.dispose=function(){this.d()};function B(t,a){var e=new K(t,a);try{e.c()}catch(n){throw e.d(),n}var i=e.d.bind(e);return i[Symbol.dispose]=i,i}var Oa,Da;function Y(t,a){f[t]=a.bind(null,f[t]||function(){})}function va(t){Da&&Da(),Da=t&&t.S()}function Tt(t){var a=this,e=t.data,i=Qt(e);i.value=e;var n=ia(function(){for(var r=a.__v;r=r.__;)if(r.__c){r.__c.__$f|=4;break}return a.__$u.c=function(){var p,l=a.__$u.S(),d=n.value;l(),Ea(d)||((p=a.base)==null?void 0:p.nodeType)!==3?(a.__$f|=1,a.setState({})):a.base.data=d},j(function(){var p=i.value.value;return p===0?0:p===!0?"":p||""})},[]);return n.value}Tt.displayName="_st";Object.defineProperties(w.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:Tt},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});Y("__b",function(t,a){if(typeof a.type=="string"){var e,i=a.props;for(var n in i)if(n!=="children"){var r=i[n];r instanceof w&&(e||(a.__np=e={}),e[n]=r,i[n]=r.peek())}}t(a)});Y("__r",function(t,a){va();var e,i=a.__c;i&&(i.__$f&=-2,(e=i.__$u)===void 0&&(i.__$u=e=function(n){var r;return B(function(){r=this}),r.c=function(){i.__$f|=1,i.setState({})},r}())),Oa=i,va(e),t(a)});Y("__e",function(t,a,e,i){va(),Oa=void 0,t(a,e,i)});Y("diffed",function(t,a){va(),Oa=void 0;var e;if(typeof a.type=="string"&&(e=a.__e)){var i=a.__np,n=a.props;if(i){var r=e.U;if(r)for(var p in r){var l=r[p];l!==void 0&&!(p in i)&&(l.d(),r[p]=void 0)}else e.U=r={};for(var d in i){var s=r[d],c=i[d];s===void 0?(s=Zt(e,d,c,n),r[d]=s):s.o(c,n)}}}t(a)});function Zt(t,a,e,i){var n=a in t&&t.ownerSVGElement===void 0,r=_(e);return{o:function(p,l){r.value=p,i=l},d:B(function(){var p=r.value.value;i[a]!==p&&(i[a]=p,n?t[a]=p:p?t.setAttribute(a,p):t.removeAttribute(a))})}}Y("unmount",function(t,a){if(typeof a.type=="string"){var e=a.__e;if(e){var i=e.U;if(i){e.U=void 0;for(var n in i){var r=i[n];r&&r.d()}}}}else{var p=a.__c;if(p){var l=p.__$u;l&&(p.__$u=void 0,l.d())}}t(a)});Y("__h",function(t,a,e,i){(i<3||i===9)&&(a.__$f|=2),t(a,e,i)});F.prototype.shouldComponentUpdate=function(t,a){if(this.__R)return!0;var e=this.__$u,i=e&&e.s!==void 0;for(var n in a)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){if(!(i||2&this.__$f||4&this.__$f)||1&this.__$f)return!0}else if(!(i||4&this.__$f)||3&this.__$f)return!0;for(var r in t)if(r!=="__source"&&t[r]!==this.props[r])return!0;for(var p in this.props)if(!(p in t))return!0;return!1};function Qt(t){return ia(function(){return _(t)},[])}var ae=0,we=Array.isArray;function h(t,a,e,i,n,r){a||(a={});var p,l,d=a;if("ref"in d)for(l in d={},a)l=="ref"?p=a[l]:d[l]=a[l];var s={type:t,props:d,key:e,ref:p,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--ae,__i:-1,__u:0,__source:n,__self:r};if(typeof t=="function"&&(p=t.defaultProps))for(l in p)d[l]===void 0&&(d[l]=p[l]);return f.vnode&&f.vnode(s),s}var ja=_(null),It=_(null),At=_(null),Ae=j(()=>!!ja.value),te=_("welcome"),ee=_(!1),zt=_(null),R=_(!0);typeof chrome<"u"&&chrome.storage&&chrome.storage.local.get(["hypatia_sidebar_open"],t=>{t.hypatia_sidebar_open!==void 0&&(R.value=t.hypatia_sidebar_open)});var $=_([]),J=_(""),_a=_([]),Ba=_(null),ze=j(()=>Ba.value&&_a.value.find(t=>t.id===Ba.value)||null),Ne=_(1),Re=_(6),V=_([]),U=_(new Set),na=_({subject:"",body:""}),Ua=_({subject:"",body:""}),Le=j(()=>{let t=na.value,a=Ua.value;return t.subject!==a.subject||t.body!==a.body}),T=_({isGenerating:!1,leadsLoading:!1,templateLoading:!1,cadenceLoading:!1,leadsResult:null,templateResult:null,cadenceResult:null,leadsError:null,templateError:null,cadenceError:null}),Pe=_({day_1:1,day_2:3,day_3:7,day_4:14}),E={setUser(t,a,e){ja.value=t,It.value=a,At.value=e},clearUser(){ja.value=null,It.value=null,At.value=null},setCampaigns(t){_a.value=t},selectCampaign(t){Ba.value=t},updateCampaign(t,a){_a.value=_a.value.map(e=>e.id===t?{...e,...a}:e)},setLeads(t){V.value=t,U.value=new Set},addLead(t){V.value=[...V.value,t]},removeLead(t){V.value=V.value.filter(a=>a.id!==t),U.value=new Set([...U.value].filter(a=>a!==t))},toggleLeadSelection(t){let a=new Set(U.value);a.has(t)?a.delete(t):a.add(t),U.value=a},selectAllLeads(){U.value=new Set(V.value.map(t=>t.id))},deselectAllLeads(){U.value=new Set},setTemplate(t){na.value=t,Ua.value={...t}},updateTemplate(t){na.value={...na.value,...t}},resetTemplate(){na.value={...Ua.value}},startGeneration(t){T.value={...T.value,isGenerating:!0,[`${t}Loading`]:!0,[`${t}Result`]:null,[`${t}Error`]:null}},completeGeneration(t,a){T.value={...T.value,[`${t}Loading`]:!1,[`${t}Result`]:a};let e=T.value;!e.leadsLoading&&!e.templateLoading&&!e.cadenceLoading&&(T.value={...e,isGenerating:!1})},failGeneration(t,a){T.value={...T.value,[`${t}Loading`]:!1,[`${t}Error`]:a};let e=T.value;!e.leadsLoading&&!e.templateLoading&&!e.cadenceLoading&&(T.value={...e,isGenerating:!1})},resetGeneration(){T.value={isGenerating:!1,leadsLoading:!1,templateLoading:!1,cadenceLoading:!1,leadsResult:null,templateResult:null,cadenceResult:null,leadsError:null,templateError:null,cadenceError:null}},setScreen(t){te.value=t},setError(t){zt.value=t},clearError(){zt.value=null},setLoading(t){ee.value=t},openSidebar(){R.value=!0,typeof chrome<"u"&&chrome.storage&&chrome.storage.local.set({hypatia_sidebar_open:!0})},closeSidebar(){R.value=!1,typeof chrome<"u"&&chrome.storage&&chrome.storage.local.set({hypatia_sidebar_open:!1})},toggleSidebar(){R.value?E.closeSidebar():E.openSidebar()},addChatMessage(t){$.value=[...$.value,t]},setChatInput(t){J.value=t},clearChat(){$.value=[],J.value=""}},ie=lt(null);function Nt({children:t}){return h(ie.Provider,{value:{actions:E},children:t})}var A=_("light"),Rt=_(!1);function Lt(){let a=getComputedStyle(document.body).backgroundColor.match(/\d+/g);if(a&&a.length>=3&&(parseInt(a[0])*299+parseInt(a[1])*587+parseInt(a[2])*114)/1e3<128)return"dark";let e=document.querySelector('[role="main"]');if(e){let n=getComputedStyle(e).backgroundColor.match(/\d+/g);if(n&&n.length>=3&&(parseInt(n[0])*299+parseInt(n[1])*587+parseInt(n[2])*114)/1e3<128)return"dark"}return document.body.classList.contains("bv1")?"dark":"light"}function $a(t){let a=document.getElementById("hypatia-root");a&&a.setAttribute("data-hypatia-theme",t);let e=document.getElementById("hypatia-modal-root");e&&e.setAttribute("data-hypatia-theme",t)}function Pt(){let t=Lt();A.value=t,Rt.value=t==="dark",$a(t);let a=new MutationObserver(()=>{let i=Lt();i!==A.value&&(A.value=i,Rt.value=i==="dark",$a(i))});a.observe(document.body,{attributes:!0,attributeFilter:["class","style"],childList:!1,subtree:!1});let e=document.querySelector('[role="main"]');return e&&a.observe(e,{attributes:!0,attributeFilter:["class","style"],childList:!1,subtree:!1}),B(()=>{$a(A.value)}),()=>a.disconnect()}function ga({size:t="md",className:a=""}){let e=["hypatia-spinner",t!=="md"&&`hypatia-spinner--${t}`,a].filter(Boolean).join(" ");return h("div",{class:e,role:"status","aria-label":"Loading"})}function re({variant:t="primary",size:a="md",fullWidth:e=!1,loading:i=!1,disabled:n=!1,iconOnly:r=!1,className:p="",children:l,...d}){let s=["hypatia-btn",`hypatia-btn--${t}`,`hypatia-btn--${a}`,e&&"hypatia-btn--full",r&&"hypatia-btn--icon",p].filter(Boolean).join(" ");return h("button",{class:s,disabled:n||i,...d,children:[i&&h(ga,{size:"sm"}),l]})}function Mt({size:t="md",variant:a="ghost",label:e,children:i,...n}){return h(re,{variant:a,size:t,iconOnly:!0,"aria-label":e,title:e,...n,children:i})}function Ht({onClose:t}){return h("div",{class:"hypatia-sidebar__header",children:[h("div",{class:"hypatia-sidebar__logo",children:[h("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:h("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5",stroke:"currentColor",fill:"none","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})}),h("span",{class:"hypatia-sidebar__title",children:"Hypatia"})]}),h(Mt,{label:"Close sidebar",onClick:t,className:"hypatia-sidebar__close",children:h("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:h("path",{d:"M18 6L6 18M6 6l12 12"})})})]})}var ne=["What are my most important emails this week?","Help me draft a reply to the latest email","Summarize my unread emails"],oe=[{key:"who_to_contact",label:"who to contact"},{key:"ask",label:"ask"},{key:"template",label:"template"}];function Dt(){let t=D(null),a=D(null),e=D(null),[i,n]=ua({who_to_contact:!1,ask:!1,template:!1});N(()=>{t.current&&t.current.scrollIntoView({behavior:"smooth"})},[$.value]);let r=mt(c=>{e.current&&clearTimeout(e.current),e.current=setTimeout(async()=>{try{let o=await chrome.runtime.sendMessage({action:"analyzeChatIntent",text:c});o&&o.success&&n(o.categories)}catch(o){console.warn("[Hypatia] Intent analysis error:",o)}},500)},[]);N(()=>()=>{e.current&&clearTimeout(e.current)},[]);let p=c=>{c.preventDefault();let o=J.value.trim();o&&(E.addChatMessage({id:Date.now(),role:"user",content:o,timestamp:new Date().toISOString()}),E.setChatInput(""),n({who_to_contact:!1,ask:!1,template:!1}),setTimeout(()=>{E.addChatMessage({id:Date.now(),role:"assistant",content:`I received your message: "${o}". This is a placeholder response - the chat functionality will be connected to the backend AI.`,timestamp:new Date().toISOString()})},1e3))},l=c=>{E.setChatInput(c),a.current&&a.current.focus()},d=c=>{let o=c.target.value;E.setChatInput(o),r(o)},s=c=>{c.key==="Enter"&&!c.shiftKey&&(c.preventDefault(),p(c))};return h("div",{class:"hypatia-chat",children:[h("div",{class:"hypatia-chat__messages",children:$.value.length===0?h(pe,{onPromptClick:l}):h(P,{children:[$.value.map(c=>h(se,{message:c},c.id)),h("div",{ref:t})]})}),h("form",{class:"hypatia-chat__input-container",onSubmit:p,children:[h("div",{class:"hypatia-intent-chips",children:oe.map(c=>h("span",{class:`hypatia-intent-chip ${i[c.key]?"active":""}`,children:c.label},c.key))}),h("div",{class:"hypatia-chat__input-wrapper",children:[h("textarea",{ref:a,class:"hypatia-chat__input",value:J.value,onInput:d,onKeyDown:s,placeholder:"type @ for context, / for actions...",rows:"1"}),h("button",{type:"submit",class:"hypatia-chat__send-button",disabled:!J.value.trim(),children:h("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:h("path",{d:"M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"})})})]})]})]})}function pe({onPromptClick:t}){return h("div",{class:"hypatia-chat__empty",children:[h("div",{class:"hypatia-chat__welcome",children:[h("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"hypatia-chat__welcome-icon",children:h("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})}),h("h3",{class:"hypatia-chat__welcome-title",children:"How can I help?"}),h("p",{class:"hypatia-chat__welcome-subtitle",children:"Ask me about your emails, drafts, or campaigns"})]}),h("div",{class:"hypatia-chat__suggestions",children:ne.map(a=>h("button",{class:"hypatia-chat__suggestion",onClick:()=>t(a),children:a},a))})]})}function se({message:t}){let a=t.role==="user",e=t.loading;return h("div",{class:`hypatia-chat__message hypatia-chat__message--${t.role}`,children:[!a&&h("div",{class:"hypatia-chat__avatar",children:h("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:h("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})})}),h("div",{class:"hypatia-chat__message-content",children:e?h(ga,{size:"sm"}):h("p",{children:t.content})})]})}var X=360,ma=250,le=`width ${ma}ms cubic-bezier(0.4, 0, 0.2, 1), max-width ${ma}ms cubic-bezier(0.4, 0, 0.2, 1), padding-right ${ma}ms cubic-bezier(0.4, 0, 0.2, 1)`;function Ga(t){t&&!t.dataset.hypatiaTransition&&(t.style.transition=le,t.dataset.hypatiaTransition="true")}function Fa(t){console.log(`[Hypatia] applyGmailShrink called with shrink=${t}`);let a=document.querySelector(".nH.bkK")||document.querySelector(".bkK");if(a){Ga(a);let n=a.getBoundingClientRect();console.log("[Hypatia] Main content (.bkK):",{currentWidth:n.width,left:n.left,targetWidth:t?`calc(100% - ${X}px)`:""}),t?(a.style.width=`calc(100% - ${X}px)`,a.style.maxWidth=`calc(100% - ${X}px)`,a.style.marginRight="0"):(a.style.width="",a.style.maxWidth="",a.style.marginRight="")}let e=document.querySelector(".aeN")?.parentElement;e&&(Ga(e),console.log("[Hypatia] Top container (parent of .aeN):",{classes:e.className,width:e.getBoundingClientRect().width}),t?e.style.paddingRight=`${X}px`:e.style.paddingRight="");let i=document.querySelector(".gb_Kd.gb_Nd.gb_Zd")||document.querySelector(".gb_Kd");i&&(Ga(i),console.log("[Hypatia] Header bar (.gb_Kd):",{classes:i.className,width:i.getBoundingClientRect().width}),t?(i.style.width=`calc(100% - ${X}px)`,i.style.maxWidth=`calc(100% - ${X}px)`):(i.style.width="",i.style.maxWidth="")),setTimeout(()=>{let n=document.querySelector(".bkK"),r=document.querySelector(".aeJ"),p=document.querySelector(".gb_Kd");console.log("[Hypatia] After apply:",{bkK:n?{width:n.getBoundingClientRect().width,classes:n.className}:null,aeJ:r?{width:r.getBoundingClientRect().width,classes:r.className}:null,gbKd:p?{width:p.getBoundingClientRect().width,classes:p.className}:null})},100)}function Ot(){let[t,a]=ua("closed"),e=D(null);if(N(()=>{e.current&&clearTimeout(e.current),R.value?(a("entering"),requestAnimationFrame(()=>{requestAnimationFrame(()=>{a("entered"),Fa(!0)})})):(t==="entered"||t==="entering")&&(a("exiting"),Fa(!1),e.current=setTimeout(()=>{a("closed")},ma));let n=new MutationObserver(()=>{R.value&&t==="entered"&&Fa(!0)});return n.observe(document.body,{childList:!0,subtree:!0}),()=>{n.disconnect(),e.current&&clearTimeout(e.current)}},[R.value]),t==="closed")return null;let i=`hypatia-sidebar hypatia-sidebar--${t}`;return h("div",{class:i,"data-hypatia-theme":A.value,children:[h(Ht,{onClose:E.closeSidebar}),h("div",{class:"hypatia-sidebar__body",children:h(Dt,{})})]})}function jt(){return R.value?null:h("button",{class:"hypatia-slider-tab",onClick:E.openSidebar,title:"Open Hypatia","data-hypatia-theme":A.value,children:[h("div",{class:"hypatia-slider-tab__icon",children:h("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:h("path",{d:"M15 18l-6-6 6-6"})})}),h("span",{class:"hypatia-slider-tab__label",children:"Hypatia"})]})}function Bt(){return N(()=>{let t=Pt();return()=>t()},[]),N(()=>{let t=document.getElementById("hypatia-sidebar-root");t&&t.setAttribute("data-hypatia-theme",A.value)},[A.value]),h(Nt,{children:[h(Ot,{}),h(jt,{})]})}function he(){if(console.log("[Hypatia Preact] Initializing sidebar..."),document.getElementById("hypatia-sidebar-root")){console.log("[Hypatia Preact] Already initialized");return}let t=document.createElement("div");t.id="hypatia-sidebar-root",document.body.appendChild(t),st(h(Bt,{}),t),console.log("[Hypatia Preact] Sidebar rendered")}function Wa(){document.querySelector(".nH.bkK")||document.querySelector(".nH.nn")?he():(console.log("[Hypatia Preact] Waiting for Gmail to load..."),setTimeout(Wa,500))}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Wa):Wa();})();
